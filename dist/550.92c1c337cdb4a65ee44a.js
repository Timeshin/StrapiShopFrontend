"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[550],{9011:function(e,t,n){var r=n(8081),s=n.n(r),i=n(3645),a=n.n(i)()(s());a.push([e.id,".REKAj6ehtCbr263VW21z{display:flex;align-items:center;justify-content:center;width:100vw;height:100vh}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg{background:#fff;border-radius:8px}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg header{top:0;display:flex;align-items:center}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg header p{width:100%;text-align:center;padding:15px;cursor:pointer;font-size:25px;font-weight:500;color:#000;transition:.3s background}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg header p:first-child{border-top-left-radius:8px}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg header p:last-child{border-top-right-radius:8px}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg header p.tiuqzuOArv0aTm6EC0bm{background-color:#5553ff;color:#fff}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg form{min-width:450px;padding:15px;display:flex;flex-direction:column;align-items:center;gap:16px}.REKAj6ehtCbr263VW21z .sNAiRb5EP0NY6AJI1PNg form .aZpNC3ix6YRDKppIzPCA{color:red;font-size:14px}",""]),a.locals={wrapper:"REKAj6ehtCbr263VW21z",content:"sNAiRb5EP0NY6AJI1PNg",active:"tiuqzuOArv0aTm6EC0bm",error:"aZpNC3ix6YRDKppIzPCA"},t.Z=a},1550:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var r,s=n(5893),i=n(7294);!function(e){e[e.LoginStep=1]="LoginStep",e[e.RegistrationStep=2]="RegistrationStep"}(r||(r={}));var a=[{value:"Login",type:r.LoginStep},{value:"Sign up",type:r.RegistrationStep}],o=({event:e,errorCallback:t,loadingCallback:n})=>{e.preventDefault();const r=Object.fromEntries(new FormData(e.target));if(!Object.values(r).some((e=>!e)))return n(),r;t()},c=n(2861).Z.create({baseURL:"http://localhost:1337/api/"}),l=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))},d=new class{constructor(e){this.api=e}register(e){return l(this,void 0,void 0,(function*(){const{data:t}=yield this.api.post("auth/local/register",e);return t}))}login(e){return l(this,void 0,void 0,(function*(){const{data:t}=yield this.api.post("auth/local",e);return t}))}}(c),u=n(2226),p=n(8727),h=n(3477),g=n(2225),f=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.II,{name:"identifier",placeholder:"username/e-mail"}),(0,s.jsx)(g.II,{name:"password",placeholder:"password"})]}),m=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.II,{name:"username",placeholder:"username"}),(0,s.jsx)(g.II,{name:"email",placeholder:"e-mail"}),(0,s.jsx)(g.II,{name:"password",placeholder:"password"})]}),b=n(3379),v=n.n(b),j=n(7795),x=n.n(j),A=n(569),N=n.n(A),R=n(3565),y=n.n(R),P=n(9216),C=n.n(P),E=n(4589),w=n.n(E),I=n(9011),z={};z.styleTagTransform=w(),z.setAttributes=y(),z.insert=N().bind(null,"head"),z.domAPI=x(),z.insertStyleElement=C(),v()(I.Z,z);var S=I.Z&&I.Z.locals?I.Z.locals:void 0,k=function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((r=r.apply(e,t||[])).next())}))},K=()=>{const[{status:e,message:t},n]=(0,i.useState)({status:"idle"}),[c,l]=(0,i.useState)(r.LoginStep),b=(0,p.T)(),v=c===r.LoginStep,j=({jwt:e,user:t})=>{n({status:"success"}),u.Z.updateLocalAccessToken(e),b((0,h.a)(t))},x=e=>{var t,r,s;const i=null===(t=e.response)||void 0===t?void 0:t.data;n({status:"error",message:(null===(s=null===(r=i.error.details)||void 0===r?void 0:r.errors)||void 0===s?void 0:s.map((e=>null==e?void 0:e.message)))||i.error.message})};return(0,s.jsx)("div",Object.assign({className:S.wrapper},{children:(0,s.jsxs)("div",Object.assign({className:S.content},{children:[(0,s.jsx)("header",{children:a.map((({type:e,value:t})=>(0,s.jsx)("p",Object.assign({className:c===e?S.active:"",onClick:()=>(e=>{l(e),n({status:"idle"})})(e)},{children:t}),t)))}),(0,s.jsxs)("form",Object.assign({method:"POST",onSubmit:e=>{let t;const r={event:e,errorCallback:()=>n({status:"error",message:"Fill fields"}),loadingCallback:()=>n({status:"loading"})};v?(t=o(r),(e=>{k(void 0,void 0,void 0,(function*(){if(e)try{const t=yield d.login(e);j(t)}catch(e){x(e)}}))})(t)):(t=o(r),(e=>{k(void 0,void 0,void 0,(function*(){if(e)try{const t=yield d.register(e);j(t)}catch(e){x(e)}}))})(t))}},{children:[c===r.LoginStep?(0,s.jsx)(f,{}):(0,s.jsx)(m,{}),"error"===e&&(Array.isArray(t)?t.map((e=>(0,s.jsx)("span",Object.assign({className:S.error},{children:e}),e))):(0,s.jsx)("span",Object.assign({className:S.error},{children:t}))),(0,s.jsx)(g.zx,Object.assign({disabled:"loading"===e,type:"submit"},{children:"Send"}))]}))]}))}))},O=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(K,{})})}}]);